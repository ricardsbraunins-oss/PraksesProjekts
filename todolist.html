<script type="module">
  import { supabase } from './supabase.js';

  // Redirect if not logged in
  if (!localStorage.getItem("username")) {
    window.location.href = "login.html";
  }

  async function loadResponses() {
    const { data, error } = await supabase
      .from('todolist') // your correct table
      .select('*');

    if (error) {
      alert("Error: " + error.message);
      return;
    }

    const table = document.getElementById("Todolist");

    data.forEach(row => {
      const newRow = table.insertRow();
      newRow.insertCell(0).innerText = row.uzd;
      newRow.insertCell(1).innerText = row.uzdveids;
      newRow.insertCell(2).innerText = row.svarigums;
    });
  }

  document.getElementById("backBtn").addEventListener("click", () => {
    window.location.href = "index.html";
  });

  loadResponses();
</script>
